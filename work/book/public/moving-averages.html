<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6.2 Moving averages | Forecasting: Principles and Practice</title>
  <meta name="description" content="2nd edition" />
  <meta name="generator" content="bookdown 0.12 and GitBook 2.6.7" />

  <meta property="og:title" content="6.2 Moving averages | Forecasting: Principles and Practice" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://Otexts.org/fpp2/" />
  <meta property="og:image" content="http://Otexts.org/fpp2/fppcover.jpg" />
  <meta property="og:description" content="2nd edition" />
  <meta name="github-repo" content="robjhyndman/fpp2" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6.2 Moving averages | Forecasting: Principles and Practice" />
  <meta name="twitter:site" content="@robjhyndman" />
  <meta name="twitter:description" content="2nd edition" />
  <meta name="twitter:image" content="http://Otexts.org/fpp2/fppcover.jpg" />

<meta name="author" content="Rob J Hyndman" />
<meta name="author" content="George Athanasopoulos" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="sec-6-1-TSpatterns.html">
<link rel="next" href="classical-decomposition.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { 
    equationNumbers: { autoNumber: "AMS" } ,
    Macros: {
      bm: ["\\boldsymbol{#1}",1],
      y:    ["y_{\\text{#1},#2}",2],
      yhat: ["\\hat{y}_{\\text{#1},#2}",2],
      ytilde: ["\\tilde{y}_{\\text{#1},#2}",2],
      Shat: ["\\hat{S}_{\\text{#1},#2}^{(#3)}",3]
    }
  }
});
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Forecasting: Principles and Practice</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="ch-intro.html"><a href="ch-intro.html"><i class="fa fa-check"></i><b>1</b> Getting started</a><ul>
<li class="chapter" data-level="1.1" data-path="what-can-be-forecast.html"><a href="what-can-be-forecast.html"><i class="fa fa-check"></i><b>1.1</b> What can be forecast?</a></li>
<li class="chapter" data-level="1.2" data-path="sec-1-2-ForPlanGoals.html"><a href="sec-1-2-ForPlanGoals.html"><i class="fa fa-check"></i><b>1.2</b> Forecasting, planning and goals</a></li>
<li class="chapter" data-level="1.3" data-path="determining-what-to-forecast.html"><a href="determining-what-to-forecast.html"><i class="fa fa-check"></i><b>1.3</b> Determining what to forecast</a></li>
<li class="chapter" data-level="1.4" data-path="Intro-DataAndMethods.html"><a href="Intro-DataAndMethods.html"><i class="fa fa-check"></i><b>1.4</b> Forecasting data and methods</a></li>
<li class="chapter" data-level="1.5" data-path="case-studies.html"><a href="case-studies.html"><i class="fa fa-check"></i><b>1.5</b> Some case studies</a></li>
<li class="chapter" data-level="1.6" data-path="the-basic-steps-in-a-forecasting-task.html"><a href="the-basic-steps-in-a-forecasting-task.html"><i class="fa fa-check"></i><b>1.6</b> The basic steps in a forecasting task</a></li>
<li class="chapter" data-level="1.7" data-path="sec-perspective.html"><a href="sec-perspective.html"><i class="fa fa-check"></i><b>1.7</b> The statistical forecasting perspective</a></li>
<li class="chapter" data-level="1.8" data-path="exercises.html"><a href="exercises.html"><i class="fa fa-check"></i><b>1.8</b> Exercises</a></li>
<li class="chapter" data-level="1.9" data-path="further-reading.html"><a href="further-reading.html"><i class="fa fa-check"></i><b>1.9</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ch-graphics.html"><a href="ch-graphics.html"><i class="fa fa-check"></i><b>2</b> Time series graphics</a><ul>
<li class="chapter" data-level="2.1" data-path="ts-objects.html"><a href="ts-objects.html"><i class="fa fa-check"></i><b>2.1</b> <code>ts</code> objects</a></li>
<li class="chapter" data-level="2.2" data-path="time-plots.html"><a href="time-plots.html"><i class="fa fa-check"></i><b>2.2</b> Time plots</a></li>
<li class="chapter" data-level="2.3" data-path="tspatterns.html"><a href="tspatterns.html"><i class="fa fa-check"></i><b>2.3</b> Time series patterns</a></li>
<li class="chapter" data-level="2.4" data-path="seasonal-plots.html"><a href="seasonal-plots.html"><i class="fa fa-check"></i><b>2.4</b> Seasonal plots</a></li>
<li class="chapter" data-level="2.5" data-path="seasonal-subseries-plots.html"><a href="seasonal-subseries-plots.html"><i class="fa fa-check"></i><b>2.5</b> Seasonal subseries plots</a></li>
<li class="chapter" data-level="2.6" data-path="scatterplots.html"><a href="scatterplots.html"><i class="fa fa-check"></i><b>2.6</b> Scatterplots</a></li>
<li class="chapter" data-level="2.7" data-path="lag-plots.html"><a href="lag-plots.html"><i class="fa fa-check"></i><b>2.7</b> Lag plots</a></li>
<li class="chapter" data-level="2.8" data-path="autocorrelation.html"><a href="autocorrelation.html"><i class="fa fa-check"></i><b>2.8</b> Autocorrelation</a></li>
<li class="chapter" data-level="2.9" data-path="wn.html"><a href="wn.html"><i class="fa fa-check"></i><b>2.9</b> White noise</a></li>
<li class="chapter" data-level="2.10" data-path="ex-graphics.html"><a href="ex-graphics.html"><i class="fa fa-check"></i><b>2.10</b> Exercises</a></li>
<li class="chapter" data-level="2.11" data-path="further-reading-1.html"><a href="further-reading-1.html"><i class="fa fa-check"></i><b>2.11</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ch-toolbox.html"><a href="ch-toolbox.html"><i class="fa fa-check"></i><b>3</b> The forecaster’s toolbox</a><ul>
<li class="chapter" data-level="3.1" data-path="sec-2-methods.html"><a href="sec-2-methods.html"><i class="fa fa-check"></i><b>3.1</b> Some simple forecasting methods</a></li>
<li class="chapter" data-level="3.2" data-path="sec-transformations.html"><a href="sec-transformations.html"><i class="fa fa-check"></i><b>3.2</b> Transformations and adjustments</a></li>
<li class="chapter" data-level="3.3" data-path="residuals.html"><a href="residuals.html"><i class="fa fa-check"></i><b>3.3</b> Residual diagnostics</a></li>
<li class="chapter" data-level="3.4" data-path="accuracy.html"><a href="accuracy.html"><i class="fa fa-check"></i><b>3.4</b> Evaluating forecast accuracy</a></li>
<li class="chapter" data-level="3.5" data-path="sec-PI.html"><a href="sec-PI.html"><i class="fa fa-check"></i><b>3.5</b> Prediction intervals</a></li>
<li class="chapter" data-level="3.6" data-path="the-forecast-package-in-r.html"><a href="the-forecast-package-in-r.html"><i class="fa fa-check"></i><b>3.6</b> The forecast package in R</a></li>
<li class="chapter" data-level="3.7" data-path="ex-toolbox.html"><a href="ex-toolbox.html"><i class="fa fa-check"></i><b>3.7</b> Exercises</a></li>
<li class="chapter" data-level="3.8" data-path="further-reading-2.html"><a href="further-reading-2.html"><i class="fa fa-check"></i><b>3.8</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ch-judgmental.html"><a href="ch-judgmental.html"><i class="fa fa-check"></i><b>4</b> Judgmental forecasts</a><ul>
<li class="chapter" data-level="4.1" data-path="sec-3-limitations.html"><a href="sec-3-limitations.html"><i class="fa fa-check"></i><b>4.1</b> Beware of limitations</a></li>
<li class="chapter" data-level="4.2" data-path="sec-3-Key-principles.html"><a href="sec-3-Key-principles.html"><i class="fa fa-check"></i><b>4.2</b> Key principles</a></li>
<li class="chapter" data-level="4.3" data-path="sec-3-Delphi.html"><a href="sec-3-Delphi.html"><i class="fa fa-check"></i><b>4.3</b> The Delphi method</a></li>
<li class="chapter" data-level="4.4" data-path="sec-3-Analogy.html"><a href="sec-3-Analogy.html"><i class="fa fa-check"></i><b>4.4</b> Forecasting by analogy</a></li>
<li class="chapter" data-level="4.5" data-path="sec-3-Scenario.html"><a href="sec-3-Scenario.html"><i class="fa fa-check"></i><b>4.5</b> Scenario Forecasting</a></li>
<li class="chapter" data-level="4.6" data-path="sec-3-NPF.html"><a href="sec-3-NPF.html"><i class="fa fa-check"></i><b>4.6</b> New product forecasting</a></li>
<li class="chapter" data-level="4.7" data-path="sec-3-Adjustments.html"><a href="sec-3-Adjustments.html"><i class="fa fa-check"></i><b>4.7</b> Judgmental adjustments</a></li>
<li class="chapter" data-level="4.8" data-path="further-reading-3.html"><a href="further-reading-3.html"><i class="fa fa-check"></i><b>4.8</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ch-regression.html"><a href="ch-regression.html"><i class="fa fa-check"></i><b>5</b> Linear regression models</a><ul>
<li class="chapter" data-level="5.1" data-path="Regr-Intro.html"><a href="Regr-Intro.html"><i class="fa fa-check"></i><b>5.1</b> The linear model</a></li>
<li class="chapter" data-level="5.2" data-path="Regr-LSprinciple.html"><a href="Regr-LSprinciple.html"><i class="fa fa-check"></i><b>5.2</b> Least squares estimation</a></li>
<li class="chapter" data-level="5.3" data-path="Regr-UsefulPredictors.html"><a href="Regr-UsefulPredictors.html"><i class="fa fa-check"></i><b>5.3</b> Some useful predictors</a></li>
<li class="chapter" data-level="5.4" data-path="Regr-EvaluatingSLR.html"><a href="Regr-EvaluatingSLR.html"><i class="fa fa-check"></i><b>5.4</b> Evaluating the regression model</a></li>
<li class="chapter" data-level="5.5" data-path="Regr-SelectingPredictors.html"><a href="Regr-SelectingPredictors.html"><i class="fa fa-check"></i><b>5.5</b> Selecting predictors</a></li>
<li class="chapter" data-level="5.6" data-path="Regr-ForeWithRegr.html"><a href="Regr-ForeWithRegr.html"><i class="fa fa-check"></i><b>5.6</b> Forecasting with regression</a></li>
<li class="chapter" data-level="5.7" data-path="Regr-MatrixEquations.html"><a href="Regr-MatrixEquations.html"><i class="fa fa-check"></i><b>5.7</b> Matrix formulation</a></li>
<li class="chapter" data-level="5.8" data-path="Regr-NonLinear.html"><a href="Regr-NonLinear.html"><i class="fa fa-check"></i><b>5.8</b> Nonlinear regression</a></li>
<li class="chapter" data-level="5.9" data-path="Regr-MultiCol.html"><a href="Regr-MultiCol.html"><i class="fa fa-check"></i><b>5.9</b> Correlation, causation and forecasting</a></li>
<li class="chapter" data-level="5.10" data-path="Regr-exercises.html"><a href="Regr-exercises.html"><i class="fa fa-check"></i><b>5.10</b> Exercises</a></li>
<li class="chapter" data-level="5.11" data-path="further-reading-4.html"><a href="further-reading-4.html"><i class="fa fa-check"></i><b>5.11</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ch-decomposition.html"><a href="ch-decomposition.html"><i class="fa fa-check"></i><b>6</b> Time series decomposition</a><ul>
<li class="chapter" data-level="6.1" data-path="sec-6-1-TSpatterns.html"><a href="sec-6-1-TSpatterns.html"><i class="fa fa-check"></i><b>6.1</b> Time series components</a></li>
<li class="chapter" data-level="6.2" data-path="moving-averages.html"><a href="moving-averages.html"><i class="fa fa-check"></i><b>6.2</b> Moving averages</a></li>
<li class="chapter" data-level="6.3" data-path="classical-decomposition.html"><a href="classical-decomposition.html"><i class="fa fa-check"></i><b>6.3</b> Classical decomposition</a></li>
<li class="chapter" data-level="6.4" data-path="x11-decomposition.html"><a href="x11-decomposition.html"><i class="fa fa-check"></i><b>6.4</b> X11 decomposition</a></li>
<li class="chapter" data-level="6.5" data-path="seats-decomposition.html"><a href="seats-decomposition.html"><i class="fa fa-check"></i><b>6.5</b> SEATS decomposition</a></li>
<li class="chapter" data-level="6.6" data-path="sec-6-stl.html"><a href="sec-6-stl.html"><i class="fa fa-check"></i><b>6.6</b> STL decomposition</a></li>
<li class="chapter" data-level="6.7" data-path="forecasting-with-decomposition.html"><a href="forecasting-with-decomposition.html"><i class="fa fa-check"></i><b>6.7</b> Forecasting with decomposition</a></li>
<li class="chapter" data-level="6.8" data-path="exercises-1.html"><a href="exercises-1.html"><i class="fa fa-check"></i><b>6.8</b> Exercises</a></li>
<li class="chapter" data-level="6.9" data-path="further-reading-5.html"><a href="further-reading-5.html"><i class="fa fa-check"></i><b>6.9</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ch-expsmooth.html"><a href="ch-expsmooth.html"><i class="fa fa-check"></i><b>7</b> Exponential smoothing</a><ul>
<li class="chapter" data-level="7.1" data-path="sec-7-1-SES.html"><a href="sec-7-1-SES.html"><i class="fa fa-check"></i><b>7.1</b> Simple exponential smoothing</a></li>
<li class="chapter" data-level="7.2" data-path="sec-7-trendmethods.html"><a href="sec-7-trendmethods.html"><i class="fa fa-check"></i><b>7.2</b> Trend methods</a></li>
<li class="chapter" data-level="7.3" data-path="sec-7-Taxonomy.html"><a href="sec-7-Taxonomy.html"><i class="fa fa-check"></i><b>7.3</b> Holt-Winters’ seasonal method</a></li>
<li class="chapter" data-level="7.4" data-path="sec-7-6-Taxonomy.html"><a href="sec-7-6-Taxonomy.html"><i class="fa fa-check"></i><b>7.4</b> A taxonomy of exponential smoothing methods</a></li>
<li class="chapter" data-level="7.5" data-path="sec-7-ETS.html"><a href="sec-7-ETS.html"><i class="fa fa-check"></i><b>7.5</b> Innovations state space models for exponential smoothing</a></li>
<li class="chapter" data-level="7.6" data-path="estimation-and-model-selection.html"><a href="estimation-and-model-selection.html"><i class="fa fa-check"></i><b>7.6</b> Estimation and model selection</a></li>
<li class="chapter" data-level="7.7" data-path="forecasting-with-ets-models.html"><a href="forecasting-with-ets-models.html"><i class="fa fa-check"></i><b>7.7</b> Forecasting with ETS models</a></li>
<li class="chapter" data-level="7.8" data-path="exercises-2.html"><a href="exercises-2.html"><i class="fa fa-check"></i><b>7.8</b> Exercises</a></li>
<li class="chapter" data-level="7.9" data-path="further-reading-6.html"><a href="further-reading-6.html"><i class="fa fa-check"></i><b>7.9</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="ch-arima.html"><a href="ch-arima.html"><i class="fa fa-check"></i><b>8</b> ARIMA models</a><ul>
<li class="chapter" data-level="8.1" data-path="stationarity-and-differencing.html"><a href="stationarity-and-differencing.html"><i class="fa fa-check"></i><b>8.1</b> Stationarity and differencing</a></li>
<li class="chapter" data-level="8.2" data-path="backshift-notation.html"><a href="backshift-notation.html"><i class="fa fa-check"></i><b>8.2</b> Backshift notation</a></li>
<li class="chapter" data-level="8.3" data-path="autoregressive-models.html"><a href="autoregressive-models.html"><i class="fa fa-check"></i><b>8.3</b> Autoregressive models</a></li>
<li class="chapter" data-level="8.4" data-path="sec-mamodels.html"><a href="sec-mamodels.html"><i class="fa fa-check"></i><b>8.4</b> Moving average models</a></li>
<li class="chapter" data-level="8.5" data-path="sec-nonseasonalarima.html"><a href="sec-nonseasonalarima.html"><i class="fa fa-check"></i><b>8.5</b> Non-seasonal ARIMA models</a></li>
<li class="chapter" data-level="8.6" data-path="estimation-and-order-selection.html"><a href="estimation-and-order-selection.html"><i class="fa fa-check"></i><b>8.6</b> Estimation and order selection</a></li>
<li class="chapter" data-level="8.7" data-path="arima-modelling-in-r.html"><a href="arima-modelling-in-r.html"><i class="fa fa-check"></i><b>8.7</b> ARIMA modelling in R</a></li>
<li class="chapter" data-level="8.8" data-path="forecasting.html"><a href="forecasting.html"><i class="fa fa-check"></i><b>8.8</b> Forecasting</a></li>
<li class="chapter" data-level="8.9" data-path="sec-seasonal-arima.html"><a href="sec-seasonal-arima.html"><i class="fa fa-check"></i><b>8.9</b> Seasonal ARIMA models</a></li>
<li class="chapter" data-level="8.10" data-path="arima-vs-ets.html"><a href="arima-vs-ets.html"><i class="fa fa-check"></i><b>8.10</b> ARIMA vs ETS</a></li>
<li class="chapter" data-level="8.11" data-path="exercises-3.html"><a href="exercises-3.html"><i class="fa fa-check"></i><b>8.11</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="ch-dynamic.html"><a href="ch-dynamic.html"><i class="fa fa-check"></i><b>9</b> Dynamic regression models</a><ul>
<li class="chapter" data-level="9.1" data-path="estimation.html"><a href="estimation.html"><i class="fa fa-check"></i><b>9.1</b> Estimation</a></li>
<li class="chapter" data-level="9.2" data-path="regression-with-arima-errors-in-r.html"><a href="regression-with-arima-errors-in-r.html"><i class="fa fa-check"></i><b>9.2</b> Regression with ARIMA errors in R</a></li>
<li class="chapter" data-level="9.3" data-path="forecasting-1.html"><a href="forecasting-1.html"><i class="fa fa-check"></i><b>9.3</b> Forecasting</a></li>
<li class="chapter" data-level="9.4" data-path="stochastic-and-deterministic-trends.html"><a href="stochastic-and-deterministic-trends.html"><i class="fa fa-check"></i><b>9.4</b> Stochastic and deterministic trends</a></li>
<li class="chapter" data-level="9.5" data-path="sec-dhr.html"><a href="sec-dhr.html"><i class="fa fa-check"></i><b>9.5</b> Dynamic harmonic regression</a></li>
<li class="chapter" data-level="9.6" data-path="lagged-predictors.html"><a href="lagged-predictors.html"><i class="fa fa-check"></i><b>9.6</b> Lagged predictors</a></li>
<li class="chapter" data-level="9.7" data-path="exercises-4.html"><a href="exercises-4.html"><i class="fa fa-check"></i><b>9.7</b> Exercises</a></li>
<li class="chapter" data-level="9.8" data-path="further-reading-7.html"><a href="further-reading-7.html"><i class="fa fa-check"></i><b>9.8</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="ch-hierarchical.html"><a href="ch-hierarchical.html"><i class="fa fa-check"></i><b>10</b> Forecasting hierarchical or grouped time series</a><ul>
<li class="chapter" data-level="10.1" data-path="Hier-hierarchical-ts.html"><a href="Hier-hierarchical-ts.html"><i class="fa fa-check"></i><b>10.1</b> Hierarchical time series</a></li>
<li class="chapter" data-level="10.2" data-path="Hier-grouped-ts.html"><a href="Hier-grouped-ts.html"><i class="fa fa-check"></i><b>10.2</b> Grouped time series</a></li>
<li class="chapter" data-level="10.3" data-path="Hier-base-coherent-forecasts.html"><a href="Hier-base-coherent-forecasts.html"><i class="fa fa-check"></i><b>10.3</b> Base and coherent forecasts</a></li>
<li class="chapter" data-level="10.4" data-path="Hier-bu.html"><a href="Hier-bu.html"><i class="fa fa-check"></i><b>10.4</b> The bottom-up approach</a></li>
<li class="chapter" data-level="10.5" data-path="Hier-td.html"><a href="Hier-td.html"><i class="fa fa-check"></i><b>10.5</b> Top-down approaches</a></li>
<li class="chapter" data-level="10.6" data-path="Hier-mo.html"><a href="Hier-mo.html"><i class="fa fa-check"></i><b>10.6</b> Middle-out approach</a></li>
<li class="chapter" data-level="10.7" data-path="Hier-projection.html"><a href="Hier-projection.html"><i class="fa fa-check"></i><b>10.7</b> The projection matrix</a></li>
<li class="chapter" data-level="10.8" data-path="Hier-reconciliation.html"><a href="Hier-reconciliation.html"><i class="fa fa-check"></i><b>10.8</b> The optimal reconciliation approach</a></li>
<li class="chapter" data-level="10.9" data-path="ex-hierarchical.html"><a href="ex-hierarchical.html"><i class="fa fa-check"></i><b>10.9</b> Exercises</a></li>
<li class="chapter" data-level="10.10" data-path="further-reading-8.html"><a href="further-reading-8.html"><i class="fa fa-check"></i><b>10.10</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="ch-advanced.html"><a href="ch-advanced.html"><i class="fa fa-check"></i><b>11</b> Advanced forecasting methods</a><ul>
<li class="chapter" data-level="11.1" data-path="sec-complexseasonality.html"><a href="sec-complexseasonality.html"><i class="fa fa-check"></i><b>11.1</b> Complex seasonality</a></li>
<li class="chapter" data-level="11.2" data-path="forecasting-counts.html"><a href="forecasting-counts.html"><i class="fa fa-check"></i><b>11.2</b> Forecasting counts</a></li>
<li class="chapter" data-level="11.3" data-path="VAR.html"><a href="VAR.html"><i class="fa fa-check"></i><b>11.3</b> Vector autoregressions</a></li>
<li class="chapter" data-level="11.4" data-path="sec-9-3-nnet.html"><a href="sec-9-3-nnet.html"><i class="fa fa-check"></i><b>11.4</b> Neural network models</a></li>
<li class="chapter" data-level="11.5" data-path="sec-ex-11.html"><a href="sec-ex-11.html"><i class="fa fa-check"></i><b>11.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="ch-practical.html"><a href="ch-practical.html"><i class="fa fa-check"></i><b>12</b> Some practical forecasting issues</a><ul>
<li class="chapter" data-level="12.1" data-path="weekly.html"><a href="weekly.html"><i class="fa fa-check"></i><b>12.1</b> Weekly, daily and sub-daily data</a></li>
<li class="chapter" data-level="12.2" data-path="counts.html"><a href="counts.html"><i class="fa fa-check"></i><b>12.2</b> Time series of counts</a></li>
<li class="chapter" data-level="12.3" data-path="limits.html"><a href="limits.html"><i class="fa fa-check"></i><b>12.3</b> Ensuring forecasts stay within limits</a></li>
<li class="chapter" data-level="12.4" data-path="combinations.html"><a href="combinations.html"><i class="fa fa-check"></i><b>12.4</b> Forecast combinations</a></li>
<li class="chapter" data-level="12.5" data-path="aggregates.html"><a href="aggregates.html"><i class="fa fa-check"></i><b>12.5</b> Prediction intervals for aggregates</a></li>
<li class="chapter" data-level="12.6" data-path="backcasting.html"><a href="backcasting.html"><i class="fa fa-check"></i><b>12.6</b> Backcasting</a></li>
<li class="chapter" data-level="12.7" data-path="short-ts.html"><a href="short-ts.html"><i class="fa fa-check"></i><b>12.7</b> Forecasting very short time series</a></li>
<li class="chapter" data-level="12.8" data-path="long-ts.html"><a href="long-ts.html"><i class="fa fa-check"></i><b>12.8</b> Forecasting very long time series</a></li>
<li class="chapter" data-level="12.9" data-path="oosos.html"><a href="oosos.html"><i class="fa fa-check"></i><b>12.9</b> One-step forecasts on test data</a></li>
<li class="chapter" data-level="12.10" data-path="isms.html"><a href="isms.html"><i class="fa fa-check"></i><b>12.10</b> Multi-step forecasts on training data</a></li>
<li class="chapter" data-level="12.11" data-path="missing-outliers.html"><a href="missing-outliers.html"><i class="fa fa-check"></i><b>12.11</b> Dealing with missing values and outliers</a></li>
<li class="chapter" data-level="12.12" data-path="bootstrap.html"><a href="bootstrap.html"><i class="fa fa-check"></i><b>12.12</b> Bootstrapping and bagging</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="using-r.html"><a href="using-r.html"><i class="fa fa-check"></i>Using R</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://OTexts.org" target="blank">Published by OTexts with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Forecasting: Principles and Practice</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="moving-averages" class="section level2">
<h2><span class="header-section-number">6.2</span> Moving averages</h2>
<p>The classical method of time series decomposition originated in the 1920s and was widely used until the 1950s. It still forms the basis of many time series decomposition methods, so it is important to understand how it works. The first step in a classical decomposition is to use a moving average method to estimate the trend-cycle, so we begin by discussing moving averages.</p>
<div id="moving-average-smoothing" class="section level3 unnumbered">
<h3>Moving average smoothing</h3>
<p>A moving average of order <span class="math inline">\(m\)</span> can be written as
<span class="math display">\[
  \hat{T}_{t} = \frac{1}{m} \sum_{j=-k}^k y_{t+j},
\]</span>
where <span class="math inline">\(m=2k+1\)</span>. That is, the estimate of the trend-cycle at time <span class="math inline">\(t\)</span> is obtained by averaging values of the time series within <span class="math inline">\(k\)</span> periods of <span class="math inline">\(t\)</span>. Observations that are nearby in time are also likely to be close in value, and the average eliminates some of the randomness in the data, leaving a smooth trend-cycle component. We call this an “<span class="math inline">\(m\)</span>-MA”, meaning a moving average of order <span class="math inline">\(m\)</span>.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" data-line-number="1"><span class="kw">autoplot</span>(elecsales) <span class="op">+</span><span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;Year&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;GWh&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb91-2" data-line-number="2"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Annual electricity sales: South Australia&quot;</span>)</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:ressales1"></span>
<img src="fpp_files/figure-html/ressales1-1.png" alt="Residential electricity sales (excluding hot water) for South Australia: 1989--2008." width="90%" />
<p class="caption">
Figure 6.4: Residential electricity sales (excluding hot water) for South Australia: 1989–2008.
</p>
</div>
<p>For example, consider Figure <a href="moving-averages.html#fig:ressales1">6.4</a> which shows the volume of electricity sold to residential customers in South Australia each year from 1989 to 2008 (hot water sales have been excluded). The data are also shown in Table <a href="moving-averages.html#tab:elecsales">6.1</a>.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" data-line-number="1">ma5 &lt;-<span class="st"> </span><span class="kw">ma</span>(elecsales, <span class="dv">5</span>)</a></code></pre></div>
<table>
<caption><span id="tab:elecsales">Table 6.1: </span>Annual electricity sales to residential customers in South Australia. 1989–2008.</caption>
<thead>
<tr class="header">
<th align="right">Year</th>
<th align="right">Sales (GWh)</th>
<th align="right">5-MA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1989</td>
<td align="right">2354.34</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="right">1990</td>
<td align="right">2379.71</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="right">1991</td>
<td align="right">2318.52</td>
<td align="right">2381.53</td>
</tr>
<tr class="even">
<td align="right">1992</td>
<td align="right">2468.99</td>
<td align="right">2424.56</td>
</tr>
<tr class="odd">
<td align="right">1993</td>
<td align="right">2386.09</td>
<td align="right">2463.76</td>
</tr>
<tr class="even">
<td align="right">1994</td>
<td align="right">2569.47</td>
<td align="right">2552.60</td>
</tr>
<tr class="odd">
<td align="right">1995</td>
<td align="right">2575.72</td>
<td align="right">2627.70</td>
</tr>
<tr class="even">
<td align="right">1996</td>
<td align="right">2762.72</td>
<td align="right">2750.62</td>
</tr>
<tr class="odd">
<td align="right">1997</td>
<td align="right">2844.50</td>
<td align="right">2858.35</td>
</tr>
<tr class="even">
<td align="right">1998</td>
<td align="right">3000.70</td>
<td align="right">3014.70</td>
</tr>
<tr class="odd">
<td align="right">1999</td>
<td align="right">3108.10</td>
<td align="right">3077.30</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="right">3357.50</td>
<td align="right">3144.52</td>
</tr>
<tr class="odd">
<td align="right">2001</td>
<td align="right">3075.70</td>
<td align="right">3188.70</td>
</tr>
<tr class="even">
<td align="right">2002</td>
<td align="right">3180.60</td>
<td align="right">3202.32</td>
</tr>
<tr class="odd">
<td align="right">2003</td>
<td align="right">3221.60</td>
<td align="right">3216.94</td>
</tr>
<tr class="even">
<td align="right">2004</td>
<td align="right">3176.20</td>
<td align="right">3307.30</td>
</tr>
<tr class="odd">
<td align="right">2005</td>
<td align="right">3430.60</td>
<td align="right">3398.75</td>
</tr>
<tr class="even">
<td align="right">2006</td>
<td align="right">3527.48</td>
<td align="right">3485.43</td>
</tr>
<tr class="odd">
<td align="right">2007</td>
<td align="right">3637.89</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="right">2008</td>
<td align="right">3655.00</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>In the second column of this table, a moving average of order 5 is shown, providing an estimate of the trend-cycle. The first value in this column is the average of the first five observations (1989–1993); the second value in the 5-MA column is the average of the values for 1990–1994; and so on. Each value in the 5-MA column is the average of the observations in the five year period centered on the corresponding year. There are no values for either the first two years or the last two years, because we do not have two observations on either side. In the formula above, column
5-MA contains the values of <span class="math inline">\(\hat{T}_{t}\)</span> with <span class="math inline">\(k=2\)</span>. To see what the trend-cycle estimate looks like, we plot it along with the original data in Figure <a href="moving-averages.html#fig:ressales2">6.5</a>.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" data-line-number="1"><span class="kw">autoplot</span>(elecsales, <span class="dt">series=</span><span class="st">&quot;Data&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb93-2" data-line-number="2"><span class="st">  </span>forecast<span class="op">::</span><span class="kw">autolayer</span>(<span class="kw">ma</span>(elecsales,<span class="dv">5</span>), <span class="dt">series=</span><span class="st">&quot;5-MA&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb93-3" data-line-number="3"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Year&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;GWh&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb93-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Annual electricity sales: South Australia&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb93-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_colour_manual</span>(<span class="dt">values=</span><span class="kw">c</span>(<span class="st">&quot;Data&quot;</span>=<span class="st">&quot;grey50&quot;</span>,<span class="st">&quot;5-MA&quot;</span>=<span class="st">&quot;red&quot;</span>),</a>
<a class="sourceLine" id="cb93-6" data-line-number="6">                     <span class="dt">breaks=</span><span class="kw">c</span>(<span class="st">&quot;Data&quot;</span>,<span class="st">&quot;5-MA&quot;</span>))</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:ressales2"></span>
<img src="fpp_files/figure-html/ressales2-1.png" alt="Residential electricity sales (black) along with the 5-MA estimate of the trend-cycle (red)." width="90%" />
<p class="caption">
Figure 6.5: Residential electricity sales (black) along with the 5-MA estimate of the trend-cycle (red).
</p>
</div>
<p>Notice that the trend-cycle (in red) is smoother than the original data and captures the main movement of the time series without all of the minor fluctuations. The moving average method does not allow estimates of <span class="math inline">\(T_{t}\)</span> when <span class="math inline">\(t\)</span> is close to the ends of the series; hence the red line does not extend to the edges of the graph on either side. Later we will use more sophisticated methods of trend-cycle estimation which do allow estimates near the endpoints.</p>
<p>The order of the moving average determines the smoothness of the trend-cycle estimate. In general, a larger order means a smoother curve. Figure <a href="moving-averages.html#fig:ressales3">6.6</a> shows the effect of changing the order of the moving average for the residential electricity sales data.</p>
<div class="figure" style="text-align: center"><span id="fig:ressales3"></span>
<img src="fpp_files/figure-html/ressales3-1.png" alt="Different moving averages applied to the residential electricity sales data." width="90%" />
<p class="caption">
Figure 6.6: Different moving averages applied to the residential electricity sales data.
</p>
</div>
<p>Simple moving averages such as these are usually of an odd order (e.g., 3, 5, 7, etc.) This is so they are symmetric: in a moving average of order <span class="math inline">\(m=2k+1\)</span>, there are <span class="math inline">\(k\)</span> earlier observations, <span class="math inline">\(k\)</span> later observations and the middle observation that are averaged. But if <span class="math inline">\(m\)</span> was even, it would no longer be symmetric.</p>
</div>
<div id="moving-averages-of-moving-averages" class="section level3 unnumbered">
<h3>Moving averages of moving averages</h3>
<p>It is possible to apply a moving average to a moving average. One reason for doing this is to make an even-order moving average symmetric.</p>
<p>For example, we might take a moving average of order 4, and then apply another moving average of order 2 to the results. In the following table, this has been done for the first few years of the Australian quarterly beer production data.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb94-1" data-line-number="1">beer2 &lt;-<span class="st"> </span><span class="kw">window</span>(ausbeer,<span class="dt">start=</span><span class="dv">1992</span>)</a>
<a class="sourceLine" id="cb94-2" data-line-number="2">ma4 &lt;-<span class="st"> </span><span class="kw">ma</span>(beer2, <span class="dt">order=</span><span class="dv">4</span>, <span class="dt">centre=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb94-3" data-line-number="3">ma2x4 &lt;-<span class="st"> </span><span class="kw">ma</span>(beer2, <span class="dt">order=</span><span class="dv">4</span>, <span class="dt">centre=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<table>
<caption><span id="tab:matable">Table 6.2: </span>A moving average of order 4 applied to the quarterly beer data, followed by a moving average of order 2.</caption>
<thead>
<tr class="header">
<th align="right">Year</th>
<th align="left">Quarter</th>
<th align="right">Observation</th>
<th align="right">4-MA</th>
<th align="right">2x4-MA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1992</td>
<td align="left">Q1</td>
<td align="right">443</td>
<td align="right"></td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="right">1992</td>
<td align="left">Q2</td>
<td align="right">410</td>
<td align="right">451</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="right">1992</td>
<td align="left">Q3</td>
<td align="right">420</td>
<td align="right">449</td>
<td align="right">450</td>
</tr>
<tr class="even">
<td align="right">1992</td>
<td align="left">Q4</td>
<td align="right">532</td>
<td align="right">452</td>
<td align="right">450</td>
</tr>
<tr class="odd">
<td align="right">1993</td>
<td align="left">Q1</td>
<td align="right">433</td>
<td align="right">449</td>
<td align="right">450</td>
</tr>
<tr class="even">
<td align="right">1993</td>
<td align="left">Q2</td>
<td align="right">421</td>
<td align="right">444</td>
<td align="right">446</td>
</tr>
<tr class="odd">
<td align="right">1993</td>
<td align="left">Q3</td>
<td align="right">410</td>
<td align="right">448</td>
<td align="right">446</td>
</tr>
<tr class="even">
<td align="right">1993</td>
<td align="left">Q4</td>
<td align="right">512</td>
<td align="right">438</td>
<td align="right">443</td>
</tr>
<tr class="odd">
<td align="right">1994</td>
<td align="left">Q1</td>
<td align="right">449</td>
<td align="right">441</td>
<td align="right">440</td>
</tr>
<tr class="even">
<td align="right">1994</td>
<td align="left">Q2</td>
<td align="right">381</td>
<td align="right">446</td>
<td align="right">444</td>
</tr>
<tr class="odd">
<td align="right">1994</td>
<td align="left">Q3</td>
<td align="right">423</td>
<td align="right">440</td>
<td align="right">443</td>
</tr>
<tr class="even">
<td align="right">1994</td>
<td align="left">Q4</td>
<td align="right">531</td>
<td align="right">447</td>
<td align="right">444</td>
</tr>
<tr class="odd">
<td align="right">1995</td>
<td align="left">Q1</td>
<td align="right">426</td>
<td align="right">445</td>
<td align="right">446</td>
</tr>
<tr class="even">
<td align="right">1995</td>
<td align="left">Q2</td>
<td align="right">408</td>
<td align="right">442</td>
<td align="right">444</td>
</tr>
<tr class="odd">
<td align="right">1995</td>
<td align="left">Q3</td>
<td align="right">416</td>
<td align="right">438</td>
<td align="right">440</td>
</tr>
<tr class="even">
<td align="right">1995</td>
<td align="left">Q4</td>
<td align="right">520</td>
<td align="right">436</td>
<td align="right">437</td>
</tr>
<tr class="odd">
<td align="right">1996</td>
<td align="left">Q1</td>
<td align="right">409</td>
<td align="right">431</td>
<td align="right">434</td>
</tr>
<tr class="even">
<td align="right">1996</td>
<td align="left">Q2</td>
<td align="right">398</td>
<td align="right">428</td>
<td align="right">430</td>
</tr>
<tr class="odd">
<td align="right">1996</td>
<td align="left">Q3</td>
<td align="right">398</td>
<td align="right">434</td>
<td align="right">431</td>
</tr>
<tr class="even">
<td align="right">1996</td>
<td align="left">Q4</td>
<td align="right">507</td>
<td align="right">434</td>
<td align="right">434</td>
</tr>
</tbody>
</table>
<p>The notation “<span class="math inline">\(2\times4\)</span>-MA” in the last column means a 4-MA followed by a 2-MA. The values in the last column are obtained by taking a moving average of order 2 of the values in the previous column. For example, the first two values in the 4-MA column are
451.25=(443+410+420+532)/4
and
448.75=(410+420+532+433)/4.
The first value in the 2x4-MA column is the average of these two:
450.00=(451.25+448.75)/2.</p>
<p>When a 2-MA follows a moving average of an even order (such as 4), it is called a “centered moving average of order 4”. This is because the results are now symmetric. To see that this is the case, we can write the <span class="math inline">\(2\times4\)</span>-MA as follows:
<span class="math display">\[\begin{align*}
  \hat{T}_{t} &amp;= \frac{1}{2}\Big[
    \frac{1}{4} (y_{t-2}+y_{t-1}+y_{t}+y_{t+1}) +
    \frac{1}{4} (y_{t-1}+y_{t}+y_{t+1}+y_{t+2})\Big] \\
             &amp;= \frac{1}{8}y_{t-2}+\frac14y_{t-1} +
             \frac14y_{t}+\frac14y_{t+1}+\frac18y_{t+2}.
\end{align*}\]</span>
It is now a weighted average of observations, but it is symmetric.</p>
<p>Other combinations of moving averages are also possible. For example, a <span class="math inline">\(3\times3\)</span>-MA is often used, and consists of a moving average of order 3 followed by another moving average of order 3. In general, an even order MA should be followed by an even order MA to make it symmetric. Similarly, an odd order MA should be followed by an odd order MA.</p>
</div>
<div id="estimating-the-trend-cycle-with-seasonal-data" class="section level3 unnumbered">
<h3>Estimating the trend-cycle with seasonal data</h3>
<p>The most common use of centered moving averages is in estimating the trend-cycle from seasonal data. Consider the <span class="math inline">\(2\times4\)</span>-MA:
<span class="math display">\[
  \hat{T}_{t} = \frac{1}{8}y_{t-2} + \frac14y_{t-1} +
    \frac14y_{t} + \frac14y_{t+1} + \frac18y_{t+2}.
\]</span>
When applied to quarterly data, each quarter of the year is given equal weight as the first and last terms apply to the same quarter in consecutive years. Consequently, the seasonal variation will be averaged out and the resulting values of <span class="math inline">\(\hat{T}_t\)</span> will have little or no seasonal variation remaining. A similar effect would be obtained using a <span class="math inline">\(2\times 8\)</span>-MA or a <span class="math inline">\(2\times 12\)</span>-MA to quarterly data.</p>
<p>In general, a <span class="math inline">\(2\times m\)</span>-MA is equivalent to a weighted moving average of order <span class="math inline">\(m+1\)</span> where all observations take the weight <span class="math inline">\(1/m\)</span>, except for the first and last terms which take weights <span class="math inline">\(1/(2m)\)</span>. So, if the seasonal period is even and of order <span class="math inline">\(m\)</span>, use a <span class="math inline">\(2\times m\)</span>-MA to estimate the trend-cycle. If the seasonal period is odd and of order <span class="math inline">\(m\)</span>, use a <span class="math inline">\(m\)</span>-MA to estimate the trend-cycle. For example, a <span class="math inline">\(2\times 12\)</span>-MA can be used to estimate the trend-cycle of monthly data and a 7-MA can be used to estimate the trend-cycle of daily data with a weekly seasonality.</p>
<p>Other choices for the order of the MA will usually result in trend-cycle estimates being contaminated by the seasonality in the data.</p>
<p>###Example: Electrical equipment manufacturing {-}</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" data-line-number="1"><span class="kw">autoplot</span>(elecequip, <span class="dt">series=</span><span class="st">&quot;Data&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb95-2" data-line-number="2"><span class="st">  </span>forecast<span class="op">::</span><span class="kw">autolayer</span>(<span class="kw">ma</span>(elecequip, <span class="dv">12</span>), <span class="dt">series=</span><span class="st">&quot;12-MA&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb95-3" data-line-number="3"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Year&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;New orders index&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb95-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Electrical equipment manufacturing (Euro area)&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb95-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_colour_manual</span>(<span class="dt">values=</span><span class="kw">c</span>(<span class="st">&quot;Data&quot;</span>=<span class="st">&quot;grey&quot;</span>,<span class="st">&quot;12-MA&quot;</span>=<span class="st">&quot;red&quot;</span>),</a>
<a class="sourceLine" id="cb95-6" data-line-number="6">    <span class="dt">breaks=</span><span class="kw">c</span>(<span class="st">&quot;Data&quot;</span>,<span class="st">&quot;12-MA&quot;</span>))</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:elecequip2"></span>
<img src="fpp_files/figure-html/elecequip2-1.png" alt="A 2x12-MA applied to the electrical equipment orders index." width="90%" />
<p class="caption">
Figure 6.7: A 2x12-MA applied to the electrical equipment orders index.
</p>
</div>
<p>Figure <a href="moving-averages.html#fig:elecequip2">6.7</a> shows a <span class="math inline">\(2\times12\)</span>-MA applied to the electrical equipment orders index. Notice that the smooth line shows no seasonality; it is almost the same as the trend-cycle shown in Figure <a href="sec-6-1-TSpatterns.html#fig:elecequip-trend">6.1</a>, which was estimated using a much more sophisticated method than moving averages. Any other choice for the order of the moving average (except for 24, 36, etc.) would have resulted in a smooth line that showed some seasonal fluctuations.</p>
</div>
<div id="weighted-moving-averages" class="section level3 unnumbered">
<h3>Weighted moving averages</h3>
<p>Combinations of moving averages result in weighted moving averages. For example, the <span class="math inline">\(2\times4\)</span>-MA discussed above is equivalent to a weighted 5-MA with weights given by
<span class="math inline">\(\left[\frac{1}{8},\frac{1}{4},\frac{1}{4},\frac{1}{4},\frac{1}{8}\right]\)</span>. In general, a weighted <span class="math inline">\(m\)</span>-MA can be written as
<span class="math display">\[
  \hat{T}_t = \sum_{j=-k}^k a_j y_{t+j},
\]</span>
where <span class="math inline">\(k=(m-1)/2\)</span>, and the weights are given by <span class="math inline">\(\left[a_{-k},\dots,a_k\right]\)</span>. It is important that the weights all sum to one and that they are symmetric so that <span class="math inline">\(a_j = a_{-j}\)</span>. The simple <span class="math inline">\(m\)</span>-MA is a special case where all of the weights are equal to <span class="math inline">\(1/m\)</span>.</p>
<p>A major advantage of weighted moving averages is that they yield a smoother estimate of the trend-cycle. Instead of observations entering and leaving the calculation at full weight, their weights slowly increase and then slowly decrease, resulting in a smoother curve.</p>
<p>Some specific sets of weights are widely used due to their mathematical properties. Some of these are given in Table <a href="moving-averages.html#tab:weights">6.3</a>.</p>
<table>
<caption><span id="tab:weights">Table 6.3: </span>Commonly used weights in weighted moving averages. S=Spencer’s weighted moving average. H=Henderson’s weighted moving average</caption>
<thead>
<tr class="header">
<th></th>
<th align="right"><span class="math inline">\(a_{0}\)</span></th>
<th align="right"><span class="math inline">\(a_{1}\)</span></th>
<th align="right"><span class="math inline">\(a_{2}\)</span></th>
<th align="right"><span class="math inline">\(a_{3}\)</span></th>
<th align="right"><span class="math inline">\(a_{4}\)</span></th>
<th align="right"><span class="math inline">\(a_{5}\)</span></th>
<th align="right"><span class="math inline">\(a_{6}\)</span></th>
<th align="right"><span class="math inline">\(a_{7}\)</span></th>
<th align="right"><span class="math inline">\(a_{8}\)</span></th>
<th align="right"><span class="math inline">\(a_{9}\)</span></th>
<th align="right"><span class="math inline">\(a_{10}\)</span></th>
<th align="right"><span class="math inline">\(a_{11}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>3-MA</td>
<td align="right">0.333</td>
<td align="right">0.333</td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
</tr>
<tr class="even">
<td>5-MA</td>
<td align="right">0.200</td>
<td align="right">0.200</td>
<td align="right">0.200</td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
</tr>
<tr class="odd">
<td>2x12-MA</td>
<td align="right">0.083</td>
<td align="right">0.083</td>
<td align="right">0.083</td>
<td align="right">0.083</td>
<td align="right">0.083</td>
<td align="right">0.083</td>
<td align="right">0.042</td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
</tr>
<tr class="even">
<td>3x3-MA</td>
<td align="right">0.333</td>
<td align="right">0.222</td>
<td align="right">0.111</td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
</tr>
<tr class="odd">
<td>3x5-MA</td>
<td align="right">0.200</td>
<td align="right">0.200</td>
<td align="right">0.133</td>
<td align="right">0.067</td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
</tr>
<tr class="even">
<td>S15-MA</td>
<td align="right">0.231</td>
<td align="right">0.209</td>
<td align="right">0.144</td>
<td align="right">0.066</td>
<td align="right">0.009</td>
<td align="right">-0.016</td>
<td align="right">-0.019</td>
<td align="right">-0.009</td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
</tr>
<tr class="odd">
<td>S21-MA</td>
<td align="right">0.171</td>
<td align="right">0.163</td>
<td align="right">0.134</td>
<td align="right">0.094</td>
<td align="right">0.051</td>
<td align="right">0.017</td>
<td align="right">-0.006</td>
<td align="right">-0.014</td>
<td align="right">-0.014</td>
<td align="right">-0.009</td>
<td align="right">-0.003</td>
<td align="right"></td>
</tr>
<tr class="even">
<td>H5-MA</td>
<td align="right">0.558</td>
<td align="right">0.294</td>
<td align="right">-0.073</td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
</tr>
<tr class="odd">
<td>H9-MA</td>
<td align="right">0.330</td>
<td align="right">0.267</td>
<td align="right">0.119</td>
<td align="right">-0.010</td>
<td align="right">-0.041</td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
</tr>
<tr class="even">
<td>H13-MA</td>
<td align="right">0.240</td>
<td align="right">0.214</td>
<td align="right">0.147</td>
<td align="right">0.066</td>
<td align="right">0.000</td>
<td align="right">-0.028</td>
<td align="right">-0.019</td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
</tr>
<tr class="odd">
<td>H23-MA</td>
<td align="right">0.148</td>
<td align="right">0.138</td>
<td align="right">0.122</td>
<td align="right">0.097</td>
<td align="right">0.068</td>
<td align="right">0.039</td>
<td align="right">0.013</td>
<td align="right">-0.005</td>
<td align="right">-0.015</td>
<td align="right">-0.016</td>
<td align="right">-0.011</td>
<td align="right">-0.004</td>
</tr>
</tbody>
</table>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="sec-6-1-TSpatterns.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="classical-decomposition.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/robjhyndman/fpp2/edit/master/06-decomposition.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
